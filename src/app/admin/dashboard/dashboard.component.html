<nav>
  <ol class="breadcrumb p-2" style="background-color: #e9e6e6">
    <li class="breadcrumb-item">
      <a routerLink="/" class="text-decoration-none">Home</a>
    </li>
    <li class="breadcrumb-item active">Dashboard</li>
  </ol>
</nav>

<h5>Dashboard</h5>
<h6>{{ ToDay | date : "" }}</h6>
<div class="container-fluid">
  <div class="row">
    <div class="col-lg-3 pb-3" style="background-color: #e9e6e6">
      <div class="row">
        <div
          class="col-11 text-white text-center mx-auto rounded pt-1 pb-1 mt-2 font-weight-bold"
          style="
            background-color: #718d97;
            font-family: 'Arial Narrow Bold', sans-serif;
          "
        >
          {{ Designation | uppercase }}
        </div>
        <div class="col-12 text-center mt-2">
          <img src="assets/user.png" width="100px" />
        </div>
        <div
          class="col-12 text-center pt-2 pb-2 font-weight-bold"
          style="font-family: Tahoma"
        >
          {{ Username | uppercase }}
        </div>
        <div class="col-12 text-center pt-2 pb-2" style="font-family: Arial">
          TEAM SUMMARY
        </div>
        <div class="col-12 mb-3">
          <ul class="list-group">
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              NO. OF TEAM MEMBERS
              <span
                class="badge bg-secondary badge-pill"
                style="font-size: 13px"
                >{{ NoOfTeamMembers }}</span
              >
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              TOTAL COST OF ALL PROJECTS
              <span
                class="badge bg-secondary badge-pill"
                style="font-size: 13px"
                >$ {{ TotalCostOfAllProjects }} k</span
              >
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              PENDING TASKS
              <span
                class="badge bg-secondary badge-pill"
                style="font-size: 13px"
                >{{ PendingTasks }}</span
              >
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              UPCOMING PROJECTS
              <span
                class="badge bg-secondary badge-pill"
                style="font-size: 13px"
                >{{ UpComingProjects | percent }}</span
              >
            </li>
          </ul>
        </div>
        <div
          class="col-12 text-center pt-2 pb-2"
          style="font-family: 'Arial Narrow'"
        >
          CLIENTS
        </div>
        <div class="col-12">
          <ul class="list-group list-group-flush">
            <li class="list-group-item" *ngFor="let client of Clients">
              {{ client | slice : 0 : 12 }}
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="row">
        <div class="col-12 pt-0 pb-2" style="background-color: #e9e6e6">
          <div class="row mt-2">
            <div class="col-6 text-left">
              <div class="dropdown">
                <button
                  class="btn btn-secondary btn-sm dropdown-toggle"
                  type="button"
                  id="dropdownMenuButton1"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Project A
                </button>
                <div class="dropdown-menu">
                  <a
                    class="dropdown-item"
                    href="#"
                    *ngFor="let Project of Project"
                    onclick="return false"
                    (click)="onProjectChange($event)"
                    >{{ Project }}</a
                  >
                </div>
              </div>
            </div>

            <div class="col-6">
              <div class="dropdown float-end">
                <button
                  class="btn btn-secondary btn-sm dropdown-toggle"
                  type="button"
                  id="dropdownMenuButton1"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  2019
                </button>
                <div class="dropdown-menu">
                  <a class="dropdown-item" href="#" *ngFor="let year of Years">
                    <span [ngSwitch]="year">
                      <span *ngSwitchCase="'2019'" style="color: green">{{
                        year
                      }}</span>
                      <span *ngSwitchCase="'2018'" style="color: blue">{{
                        year
                      }}</span>
                      <span *ngSwitchCase="'2017'" style="color: red">{{
                        year
                      }}</span>
                      <span *ngSwitchDefault style="color: black">{{
                        year
                      }}</span>
                    </span>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          class="col-11 rounded mx-auto mt-2 text-white text-center pt-1 pb-1 mx-auto rounded font-weight-bold"
          style="background-color: #718d97; font-family: 'Arial Narrow'"
        >
          PROJECT BRIEFING
        </div>
        <div class="col-12">
          <table class="table table-borderless">
            <tr>
              <td>Project Cost</td>
              <td>{{ ProjectCost | currency : "INR" }}</td>
            </tr>
            <tr>
              <td>Current Expenditure</td>
              <td>{{ CurrentExpenditure | currency : "INR" }}</td>
            </tr>
            <tr>
              <td>Available Funds</td>
              <td>{{ AvailableFunds | currency : "INR" }}</td>
            </tr>
          </table>
        </div>
        <div
          class="col-11 mx-auto mt-1 text-white text-center pt-1 pb-1 mx-2 rounded font-weight-bold"
          style="background-color: #718d97; font-family: 'Arial Narrow'"
        >
          TEAM MEMBERS SUMMARY
        </div>
        <div class="col-12">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Region</th>
                <th scope="col">Team Members Count</th>
                <th scope="col">Temporarily Unavailable Members</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let teamMembersSummary of TeamMembersSummary">
                <th scope="row">{{ teamMembersSummary.Region }}</th>
                <td>{{ teamMembersSummary.TeamMembersCount }}</td>
                <td>{{ teamMembersSummary.TemporarilyUnavailableMembers }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="col-lg-3" style="background-color: #e9e6e6">
      <div class="row">
        <div
          class="col-11 mx-auto mt-1 text-white text-center p-1 mx-2 mt-2 rounded font-weight-bold"
          style="background-color: #718d97; font-family: 'Arial Narrow'"
        >
          TEAM MEMBERS
        </div>
        <div class="col-lg-12 pt-2">
          <div class="accordion" id="accordionExample">
            <div
              class="accordion-item"
              *ngFor="let teamMembersGroup of TeamMembers; let i = index"
            >
              <h2 class="accordion-header" [id]="'heading' + i">
                <button
                  class="accordion-button text-white bg-secondary"
                  type="button"
                  [ngClass]="{ collapsed: i != 0 }"
                  data-bs-toggle="collapse"
                  [attr.data-bs-target]="'#collapse' + i"
                  aria-expanded="true"
                  [attr.aria-controls]="'collapse' + i"
                >
                  {{ teamMembersGroup.Region }}
                </button>
              </h2>
              <div
                [id]="'collapse' + i"
                [ngClass]="{ show: i == 0 }"
                class="accordion-collapse collapse show"
                [attr.aria-labelledby]="'heading' + i"
                data-bs-parent="#accordionExample"
              >
                <div class="accordion-body">
                  <div
                    *ngIf="i == 0; then firstTemplate; else secondTemplate"
                  ></div>
                  <ng-template #firstTemplate>
                    <div
                      class="card mt-2"
                      *ngFor="let memeber of teamMembersGroup.Members"
                    >
                      <div class="card-header bg-secondary text-white">
                        #{{ memeber.ID }} {{ memeber.Name }}
                      </div>
                      <div class="card-body">
                        {{ memeber.Status }}
                      </div>
                    </div>
                  </ng-template>
                  <ng-template #secondTemplate>
                    <table class="table">
                      <thead>
                        <tr>
                          <th>ID</th>
                          <th>Name</th>
                          <th>Status</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let memeber of teamMembersGroup.Members">
                          <td>{{ memeber.ID }}</td>
                          <td
                            [style.color]="
                              memeber.Status == 'Busy' ? 'red' : 'black'
                            "
                          >
                            {{ memeber.Name }}
                          </td>
                          <td>{{ memeber.Status }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
